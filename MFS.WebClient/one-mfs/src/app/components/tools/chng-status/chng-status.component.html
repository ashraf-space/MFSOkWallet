<mfs-loader *ngIf="loading"></mfs-loader>
<p-panel [toggleable]="true" header="Search Client Profile">
	<br />
	<div class="p-grid">
		<div class="p-col-9">
			<span class="ui-float-label ">
				<input id="float-input" type="text" class="form-control" pInputText pKeyFilter="int" [(ngModel)]="model.mphone">
				<label for="float-input input-sm" class="col-form-label"><i class='fa fa-search'></i> Enter OK Account Number</label>
			</span>
		</div>
		<div class="p-col-3">
			<button type="button" class="btn btn-blue btn-sm btn-reverse btn-block" (click)="onSearch()" [disabled]=" !model.mphone || (model.mphone.length != 11)"><i class="fas fa-search"></i> Search </button>
		</div>
	</div>
</p-panel>
<div class="p-grid ">
	<div class="p-col-12" *ngIf="model.catId">
		<p-accordion>
			<p-accordionTab header="Current Status" [selected]="true">
				<p-scrollPanel [style]="{width: '100%', height: '150px'}">
					<div class="p-grid">
						<div class="p-col-4">
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Category: </label>
								<label class="p-col-8  single-line">{{ model.catId | clientCategory }}</label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Sub Category: </label>
								<label class="p-col-8  single-line">{{ model.subCategory}}</label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Registration Status: </label>
								<label class="p-col-8  single-line" [innerHtml]=" model.regStatus | statusCheck: 'regStatus'"></label>
							</div>

							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Status: </label>
								<label class="p-col-8  single-line" [innerHtml]=" model.status | statusCheck: 'status'"></label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Registration Source: </label>
								<label class="p-col-8  single-line" [innerHtml]=" model.regSource | statusCheck: 'regSource'"></label>
							</div>
						</div>
						<div class="p-col-4">

							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Black Status: </label>
								<label class="p-col-8  single-line" [innerHtml]=" model.blackList | statusCheck: 'blackStatus'"></label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Pin Status: </label>
								<label class="p-col-8  single-line" [innerHtml]=" model.pinStatus | statusCheck: 'pinStatus'"></label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Entry By: </label>
								<label class="p-col-8  single-line">{{ model.entryBy }}</label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Entry Date: </label>
								<label class="p-col-8  single-line">{{ model.entryDate | date:'dd/MMM/yyyy h:mm a'}}</label>
							</div>

						</div>
						<div class="p-col-4">
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Logical Date: </label>
								<label class="p-col-8  single-line">{{ model.regDate | date:'dd/MMM/yyyy h:mm a' }}</label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Physical Date </label>
								<label class="p-col-8  single-line">{{ model.authoDate | date:'dd/MMM/yyyy h:mm a'}}</label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Auth By: </label>
								<label class="p-col-8  single-line">{{ model.authoBy }}</label>
							</div>
							<div class="form-group p-grid">
								<label class="p-col-4 col-form-label single-line property-name">Auth Date: </label>
								<label class="p-col-8  single-line">{{ model.authoDate | date:'dd/MMM/yyyy h:mm a'}}</label>
							</div>
						</div>
					</div>
				</p-scrollPanel>
			</p-accordionTab>
		</p-accordion>
	</div>
</div>
<p-panel [toggleable]="true" header="Change Status">
	<div class="p-grid">		
		<div class="p-col-6">
			<p-dropdown [options]="statusList" placeholder="Select Status" [(ngModel)]="selectStatus" [showClear]="true"
						[filter]="true" filterBy="label,value.name" [style]="{display: 'grid'}"></p-dropdown>
		</div>
		<div class="p-col-6">
			<textarea rows="1" cols="85" maxlength="99" pInputTextarea placeholder="Remarks*" [(ngModel)]="remarks"></textarea>
		</div>
		<div class="p-col-12">
			<button type="button" class="btn btn-blue btn-sm btn-reverse btn-block" (click)="changeStatus()" [disabled]="!selectStatus || !remarks || !model.mphone || disableButton"><i class="fas fa-search"></i> Update </button>
		</div>
	</div>

</p-panel>